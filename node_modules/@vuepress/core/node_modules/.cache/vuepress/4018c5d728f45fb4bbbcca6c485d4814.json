{"remainingRequest":"/Users/blibli/Desktop/vuepress-starter-1/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/blibli/Desktop/vuepress-starter-1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/blibli/Desktop/vuepress-starter-1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/blibli/Desktop/vuepress-starter-1/docs/.vuepress/components/update.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/blibli/Desktop/vuepress-starter-1/docs/.vuepress/components/update.vue","mtime":1589625246000},{"path":"/Users/blibli/Desktop/vuepress-starter-1/node_modules/cache-loader/dist/cjs.js","mtime":1656864014424},{"path":"/Users/blibli/Desktop/vuepress-starter-1/node_modules/babel-loader/lib/index.js","mtime":1656864014423},{"path":"/Users/blibli/Desktop/vuepress-starter-1/node_modules/cache-loader/dist/cjs.js","mtime":1656864014424},{"path":"/Users/blibli/Desktop/vuepress-starter-1/node_modules/vue-loader/lib/index.js","mtime":1656864014654}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1cGRhdGUnLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiR0aGVtZUNvbmZpZy51cGRhdGUgJiYgdGhpcy4kdGhlbWVDb25maWcudXBkYXRlLnRpbWUpIHsKICAgICAgY29uc3QgdXBkYXRlVGltZSA9IHRoaXMuJHRoZW1lQ29uZmlnLnVwZGF0ZS50aW1lOwoKICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgLy8g6K6+572uY29va2llCiAgICAgICAgY29uc3QgbGFzdFRpbWUgPSB0aGlzLmdldENvb2tpZSgndXBkYXRlX3RpbWUnKTsKCiAgICAgICAgaWYgKGxhc3RUaW1lID09IHVwZGF0ZVRpbWUpIHsKICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNldENvb2tpZSgndXBkYXRlX3RpbWUnLCB1cGRhdGVUaW1lKTsKICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOiuvue9rmxvY2FsU3RvcmFnZQogICAgICAgIGNvbnNvbGUubG9nKCforr7nva5sb2NhbFN0b3JhZ2UnKTsKICAgICAgICBjb25zdCBsYXN0VGltZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXBkYXRlX3RpbWUnKTsKCiAgICAgICAgaWYgKGxhc3RUaW1lID09IHVwZGF0ZVRpbWUpIHsKICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1cGRhdGVfdGltZScsIHVwZGF0ZVRpbWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9CgogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBpZiAoIXRoaXMudmlzaWJsZSkgcmV0dXJuOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VEaWFsb2cpOwogICAgfSk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHRpdGxlKCkgewogICAgICBpZiAodGhpcy4kdGhlbWVDb25maWcudXBkYXRlICYmIHRoaXMuJHRoZW1lQ29uZmlnLnVwZGF0ZS50aXRsZSkgewogICAgICAgIHJldHVybiB0aGlzLiR0aGVtZUNvbmZpZy51cGRhdGUudGl0bGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCgogICAgdXBkYXRlTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuJHRoZW1lQ29uZmlnLnVwZGF0ZSAmJiB0aGlzLiR0aGVtZUNvbmZpZy51cGRhdGUudXBkYXRlTGlzdCkgewogICAgICAgIHJldHVybiB0aGlzLiR0aGVtZUNvbmZpZy51cGRhdGUudXBkYXRlTGlzdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRDb29raWUobmFtZSwgdmFsdWUsIHNlY29uZHMpIHsKICAgICAgc2Vjb25kcyA9IHNlY29uZHMgfHwgMDsgLy9zZWNvbmRz5pyJ5YC85bCx55u05o6l6LWL5YC877yM5rKh5pyJ5Li6MAoKICAgICAgdmFyIGV4cGlyZXMgPSAnJzsKCiAgICAgIGlmIChzZWNvbmRzICE9IDApIHsKICAgICAgICAvL+iuvue9rmNvb2tpZeeUn+WtmOaXtumXtAogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBzZWNvbmRzICogMTAwMCk7CiAgICAgICAgZXhwaXJlcyA9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9HTVRTdHJpbmcoKTsKICAgICAgfQoKICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIGVzY2FwZSh2YWx1ZSkgKyBleHBpcmVzICsgJzsgcGF0aD0vJzsgLy/ovaznoIHlubbotYvlgLwKICAgIH0sCgogICAgZ2V0Q29va2llKGNfbmFtZSkgewogICAgICBpZiAoZG9jdW1lbnQuY29va2llLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgY19zdGFydCA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKGNfbmFtZSArICc9Jyk7CgogICAgICAgIGlmIChjX3N0YXJ0ICE9IC0xKSB7CiAgICAgICAgICBjX3N0YXJ0ID0gY19zdGFydCArIGNfbmFtZS5sZW5ndGggKyAxOwogICAgICAgICAgdmFyIGNfZW5kID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoJzsnLCBjX3N0YXJ0KTsKICAgICAgICAgIGlmIChjX2VuZCA9PSAtMSkgY19lbmQgPSBkb2N1bWVudC5jb29raWUubGVuZ3RoOwogICAgICAgICAgcmV0dXJuIHVuZXNjYXBlKGRvY3VtZW50LmNvb2tpZS5zdWJzdHJpbmcoY19zdGFydCwgY19lbmQpKS5yZXBsYWNlKC9cIi9nLCAnJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCgogICAgY2xvc2VEaWFsb2coZSkgewogICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLiRyZWZzLmRpYWxvZ0JveDsKICAgICAgY29uc3QgbGluayA9IHRoaXMuJHJlZnMubGluazsgLy8g54K55Ye7IOiSmeWxguS7peWPiuaWh+eroOmTvuaOpeWFs+mXrQoKICAgICAgaWYgKGRpYWxvZyAmJiAhZGlhbG9nLmNvbnRhaW5zKGUudGFyZ2V0KSB8fCBlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2FydGljbGVfbGluaycpIHsKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsgLy8gcmVtb3ZlIGV2ZW50CgogICAgICAgIHRoaXMucmVtb3ZlRXZlbnQoKTsKICAgICAgfQogICAgfSwKCiAgICByZW1vdmVFdmVudCgpIHsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlRGlhbG9nKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA4BA;EACAA,cADA;;EAEAC;IACA;MACAC;IADA;EAGA,CANA;;EAQAC;IACA;MACA;;MACA;QACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;UACA;QACA;MACA,CATA,MASA;QACA;QACAC;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;UACAC;QACA;MACA;IACA,CAtBA,MAsBA;MACA;IACA;;IACA;MACA;MACAC;IACA,CAHA;EAIA,CAtCA;;EAwCAC;IACAC;MACA,IACA,4BACA,8BAFA,EAGA;QACA;MACA,CALA,MAKA;QACA;MACA;IACA,CAVA;;IAWAC;MACA,IACA,4BACA,mCAFA,EAGA;QACA;MACA,CALA,MAKA;QACA;MACA;IACA;;EApBA,CAxCA;EA+DAC;IACAC;MACAC,uBADA,CACA;;MACA;;MACA;QACA;QACA;QACAC;QACAC;MACA;;MACAR,kBACAN,iDADA,CATA,CAUA;IACA,CAZA;;IAcAe;MACA;QACA;;QACA;UACAC;UACA;UACA;UACA,gBACAV,yCADA,EAEAW,OAFA,CAEA,KAFA,EAEA,EAFA;QAGA;MACA;;MACA;IACA,CA3BA;;IA6BAC;MACA;MACA,6BAFA,CAGA;;MACA,IACAC,wCACAC,oCAFA,EAGA;QACA,qBADA,CAEA;;QACA;MACA;IACA,CAzCA;;IA0CAC;MACAf;IACA;;EA5CA;AA/DA","names":["name","data","visible","mounted","console","window","document","computed","title","updateList","methods","setCookie","seconds","date","expires","getCookie","c_start","replace","closeDialog","dialog","e","removeEvent"],"sourceRoot":"docs/.vuepress/components","sources":["update.vue"],"sourcesContent":["<template>\r\n    <div class=\"update_dialog\" v-if=\"title && updateList.length && visible\">\r\n        <div class=\"update_container\" ref=\"dialogBox\">\r\n            <div class=\"title\">{{ title }}</div>\r\n            <div class=\"route\" v-for=\"(item, index) in updateList\" :key=\"index\">\r\n                <div class=\"left_line\">\r\n                    <span class=\"line\"></span>\r\n                </div>\r\n                <div class=\"right_content\">\r\n                    <h4 class=\"time\">{{ item.time }}</h4>\r\n                    <router-link\r\n                        ref=\"link\"\r\n                        :to=\"link.url\"\r\n                        class=\"article_link\"\r\n                        v-for=\"(link, idx) in item.content\"\r\n                        :key=\"idx\"\r\n                        >{{ link.title }}</router-link\r\n                    >\r\n                </div>\r\n            </div>\r\n            <div class=\"footer_bottom\">\r\n               如果您有任何建议, 欢迎加好友私聊\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'update',\r\n        data() {\r\n            return {\r\n                visible: false,\r\n            }\r\n        },\r\n\r\n        mounted() {\r\n            if (this.$themeConfig.update && this.$themeConfig.update.time) {\r\n                const updateTime = this.$themeConfig.update.time\r\n                if (!window.localStorage) {\r\n                    // 设置cookie\r\n                    const lastTime = this.getCookie('update_time')\r\n                    if (lastTime == updateTime) {\r\n                        this.visible = false\r\n                    } else {\r\n                        this.setCookie('update_time', updateTime)\r\n                        this.visible = true\r\n                    }\r\n                } else {\r\n                    // 设置localStorage\r\n                    console.log('设置localStorage')\r\n                    const lastTime = window.localStorage.getItem('update_time')\r\n                    if (lastTime == updateTime) {\r\n                        this.visible = false\r\n                    } else {\r\n                        this.visible = true\r\n                        window.localStorage.setItem('update_time', updateTime)\r\n                    }\r\n                }\r\n            }else{\r\n                this.visible = false\r\n            }\r\n            this.$nextTick(() => {\r\n                if (!this.visible) return\r\n                document.addEventListener('click', this.closeDialog)\r\n            })\r\n        },\r\n\r\n        computed: {\r\n            title() {\r\n                if (\r\n                    this.$themeConfig.update &&\r\n                    this.$themeConfig.update.title\r\n                ) {\r\n                    return this.$themeConfig.update.title\r\n                } else {\r\n                    return null\r\n                }\r\n            },\r\n            updateList() {\r\n                if (\r\n                    this.$themeConfig.update &&\r\n                    this.$themeConfig.update.updateList\r\n                ) {\r\n                    return this.$themeConfig.update.updateList\r\n                } else {\r\n                    return []\r\n                }\r\n            },\r\n        },\r\n\r\n        methods: {\r\n            setCookie(name, value, seconds) {\r\n                seconds = seconds || 0 //seconds有值就直接赋值，没有为0\r\n                var expires = ''\r\n                if (seconds != 0) {\r\n                    //设置cookie生存时间\r\n                    var date = new Date()\r\n                    date.setTime(date.getTime() + seconds * 1000)\r\n                    expires = '; expires=' + date.toGMTString()\r\n                }\r\n                document.cookie =\r\n                    name + '=' + escape(value) + expires + '; path=/' //转码并赋值\r\n            },\r\n\r\n            getCookie(c_name) {\r\n                if (document.cookie.length > 0) {\r\n                    var c_start = document.cookie.indexOf(c_name + '=')\r\n                    if (c_start != -1) {\r\n                        c_start = c_start + c_name.length + 1\r\n                        var c_end = document.cookie.indexOf(';', c_start)\r\n                        if (c_end == -1) c_end = document.cookie.length\r\n                        return unescape(\r\n                            document.cookie.substring(c_start, c_end)\r\n                        ).replace(/\\\"/g, '')\r\n                    }\r\n                }\r\n                return null\r\n            },\r\n\r\n            closeDialog(e) {\r\n                const dialog = this.$refs.dialogBox\r\n                const link = this.$refs.link\r\n                // 点击 蒙层以及文章链接关闭\r\n                if (\r\n                    (dialog && !dialog.contains(e.target)) ||\r\n                    e.target.className == 'article_link'\r\n                ) {\r\n                    this.visible = false\r\n                    // remove event\r\n                    this.removeEvent()\r\n                }\r\n            },\r\n            removeEvent() {\r\n                document.removeEventListener('click', this.closeDialog)\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .update_dialog {\r\n        position: fixed;\r\n        width: 100%;\r\n        height: 100%;\r\n        left: 0;\r\n        top: 0;\r\n        z-index: 99;\r\n        background-color: rgba(0, 0, 0, 0.5);\r\n    }\r\n    .update_container {\r\n        width: 80%;\r\n        max-width: 500px;\r\n        background-color: #fff;\r\n        padding: 20px;\r\n        box-sizing: border-box;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        transform: translate(-50%, -50%);\r\n        border-radius: 8px;\r\n    }\r\n    .update_container .title {\r\n        font-size: 16px;\r\n        border-bottom: 1px solid #eee;\r\n        line-height: 40px;\r\n        font-weight: bold;\r\n        margin-bottom: 20px;\r\n    }\r\n    .update_container .route {\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        flex-flow: row;\r\n    }\r\n    .right_content {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n    .right_content .time {\r\n        margin: 0;\r\n        margin-top: -4px;\r\n    }\r\n    .right_content .article_link {\r\n        font-size: 14px;\r\n        margin-top: 10px;\r\n    }\r\n    .right_content .article_link:last-child {\r\n        margin-bottom: 15px;\r\n    }\r\n    .route .left_line {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        margin-right: 16px;\r\n    }\r\n    .route .left_line::before {\r\n        content: ' ';\r\n        display: inline-block;\r\n        width: 12px;\r\n        height: 12px;\r\n        border-radius: 50%;\r\n        border: 2px solid #42b983;\r\n        background-color: #fff;\r\n        box-sizing: border-box;\r\n        flex-shrink: 0;\r\n    }\r\n    .route .left_line .line {\r\n        display: inline-block;\r\n        height: 100%;\r\n        width: 2px;\r\n        background-color: #eee;\r\n    }\r\n    .footer_bottom{\r\n        font-size: 12px;\r\n        color: #666;\r\n        text-align: center;\r\n        padding: 10px ;\r\n    }\r\n</style>\r\n"]}]}